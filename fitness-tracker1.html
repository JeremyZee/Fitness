<!DOCTYPE html>
<html>
<head>
<title>Fitness Live</title>
<meta name="viewport" content="width=device-width">
<style>
body{font-family:-apple-system,sans-serif;margin:20px;max-width:400px;margin:auto;}
.card{border:1px solid #ddd;border-radius:12px;padding:20px;margin:10px 0;}
.exercise{background:#e3f2fd;}.sleep{background:#f3e5f5;}
.big{font-size:48px;font-weight:bold;color:#1976d2;}
.goal{height:8px;background:#e0e0e0;border-radius:4px;margin-top:10px;}
.goal-fill{height:100%;background:#4caf50;border-radius:4px;}
#message{font-weight:bold;color:#1976d2;}
</style>
</head>
<body>
<h1>Today</h1>
<div id="exercise" class="card exercise">
<div class="big" id="ex-cal">...</div>
<div id="ex-details">...</div>
<div class="goal"><div class="goal-fill" id="ex-goal"></div></div>
</div>
<div id="sleep" class="card sleep">
<div class="big" id="sleep-time">...</div>
<div class="goal"><div class="goal-fill" id="sleep-goal"></div></div>
</div>
<p id="message">Loading...</p>

<script>
const URL='https://dbywqgnvfkpfcqoydptg.supabase.co/rest/v1/daily';
fetch(URL+'?select=*&order=date.desc&limit=1',{headers:{'apikey':'sb_publishable_5Z_HjadU7rRgO49kuD70pw_p5j2n023'}})
.then(r=>r.json()).then(data=>{
if(!data[0]) throw 'No data';
const row=data[0];
document.getElementById('message').innerText='✅ Live: '+row.date;
document.getElementById('ex-cal').innerText=row.exercise_calories+' kcal';
document.getElementById('ex-details').innerText=row.exercise_minutes+' min';
document.getElementById('ex-goal').style.width=Math.min(row.exercise_calories/600*100,100)+'%';
const sm=Math.floor(row.sleep_minutes/60)+'h '+row.sleep_minutes%60+'m';
document.getElementById('sleep-time').innerText=sm;
document.getElementById('sleep-goal').style.width=Math.min(row.sleep_minutes/480*100,100)+'%';
}).catch(e=>document.getElementById('message').innerText='❌ '+e);
</script>
</body>
</html>
